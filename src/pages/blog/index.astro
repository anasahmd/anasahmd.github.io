---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import { sortPostsByDate } from '../../lib/date';

const blogs = sortPostsByDate(
	await getCollection('blog', ({ data }) => data.isDraft !== true)
);
---

<MainLayout location="blog">
	<main class="flex-1 w-11/12 mx-auto max-w-2xl flex mt-8 flex-col">
		<h1 class="text-2xl font-semibold">Blog</h1>
		<div class="container mt-8">
			{
				blogs.map((blog) => (
					<div class="flex justify-between w-full flex-col gap-3">
						<a
							href={`/blog/${blog.slug}`}
							target="_self"
							class="underline decoration-neutral-300 underline-offset-4 transition-colors focus:decoration-neutral-400 hover:decoration-neutral-400"
						>
							<h3 class="text-lg font-semibold">{blog.data.title}</h3>
						</a>
						<div>{blog.data.description}</div>
						<div>{blog.data.date}</div>
					</div>
				))
			}
		</div>
	</main>
</MainLayout>
